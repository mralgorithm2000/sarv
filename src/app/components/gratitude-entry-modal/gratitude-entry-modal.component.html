<ion-header>
  <ion-toolbar>
    <ion-title>ثبت شکرگزاری</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="dismiss()">
        <ion-icon name="close"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <div class="entry-form">
    <ion-textarea [(ngModel)]="gratitudeText" placeholder="امروز برای چی شکرگزاری؟!" autoGrow="true" rows="6"
      class="custom-textarea">
    </ion-textarea>
    <div *ngIf="text_error" class="error-container">{{ text_error }}</div>

    <div class="profile-image-upload">
      <label class="profile-image-label">
        <input type="file" accept="image/*" (change)="onImageSelected($event)" hidden />
        <ion-icon name="camera" size="large"></ion-icon>
        <span>انتخاب تصویر</span>
      </label>
      <div *ngIf="avatar_error" class="error-container">{{ avatar_error }}</div>

      <img *ngIf="postImage" [src]="postImage" class="profile-preview" />
    </div>

    <div class="type-group" style="margin-top: 18px;">
      <label style="font-weight: 500; display: block; margin-bottom: 8px;">نوع شکرگزاری</label>
      <ion-radio-group [(ngModel)]="type" name="type" style="display: flex; flex-direction: row-reverse; gap: 24px;">
        <ion-item lines="none" style="--background: transparent;">
          <ion-label>عمومی</ion-label> 
          <ion-radio slot="start" value="public"></ion-radio>
        </ion-item>
        <ion-item lines="none" style="--background: transparent;">
          <ion-label>خصوصی</ion-label>
          <ion-radio slot="start" value="private"></ion-radio>
        </ion-item>
      </ion-radio-group>
      <div class="type-explanation" style="font-size: 0.98rem; color: #888; margin-top: 4px; margin-bottom: 4px;">
        «قدردانی‌های خصوصی فقط برای شما قابل مشاهده هستند. قدردانی‌های عمومی برای همه کاربران نمایش داده می‌شوند.»
      </div>
      <div *ngIf="type_error" class="error-container">{{ type_error }}</div>
    </div>

    <div class="button-container">
      <ion-button fill="outline" (click)="dismiss()">بستن</ion-button>
      <ion-button (click)="submitEntry()">ثبت</ion-button>
    </div>
  </div>
</ion-content>